{"ast":null,"code":"import { Texture2D } from '@luma.gl/core';\nconst DEFAULT_TEXTURE_PARAMETERS = {\n  [10241]: 9987,\n  [10240]: 9729,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst internalTextures = {};\nexport function createTexture(gl, image, parameters) {\n  if (image instanceof Texture2D) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    image = {\n      data: image\n    };\n  }\n  let specialTextureParameters = null;\n  if (image.compressed) {\n    specialTextureParameters = {\n      [10241]: image.data.length > 1 ? 9985 : 9729\n    };\n  }\n  const texture = new Texture2D(gl, {\n    ...image,\n    parameters: {\n      ...DEFAULT_TEXTURE_PARAMETERS,\n      ...specialTextureParameters,\n      ...parameters\n    }\n  });\n  internalTextures[texture.id] = true;\n  return texture;\n}\nexport function destroyTexture(texture) {\n  if (!texture || !(texture instanceof Texture2D)) {\n    return;\n  }\n  if (internalTextures[texture.id]) {\n    texture.delete();\n    delete internalTextures[texture.id];\n  }\n}","map":{"version":3,"names":["Texture2D","DEFAULT_TEXTURE_PARAMETERS","internalTextures","createTexture","gl","image","parameters","constructor","name","data","specialTextureParameters","compressed","length","texture","id","destroyTexture","delete"],"sources":["/Users/maks/Desktop/projects/geo-viz/node_modules/@deck.gl/core/src/utils/texture.ts"],"sourcesContent":["import {Texture2D} from '@luma.gl/core';\nimport GL from '@luma.gl/constants';\n\nconst DEFAULT_TEXTURE_PARAMETERS: Record<number, number> = {\n  [GL.TEXTURE_MIN_FILTER]: GL.LINEAR_MIPMAP_LINEAR,\n  [GL.TEXTURE_MAG_FILTER]: GL.LINEAR,\n  [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n  [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE\n};\n\n// Track the textures that are created by us. They need to be released when they are no longer used.\nconst internalTextures: Record<string, boolean> = {};\n\nexport function createTexture(\n  gl: WebGLRenderingContext,\n  image: any,\n  parameters: Record<number, number>\n): Texture2D | null {\n  // image could be one of:\n  //  - Texture2D\n  //  - Browser object: Image, ImageData, ImageData, HTMLCanvasElement, HTMLVideoElement, ImageBitmap\n  //  - Plain object: {width: <number>, height: <number>, data: <Uint8Array>}\n  if (image instanceof Texture2D) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    // Browser object\n    image = {data: image};\n  }\n\n  let specialTextureParameters: Record<number, number> | null = null;\n  if (image.compressed) {\n    specialTextureParameters = {\n      [GL.TEXTURE_MIN_FILTER]: image.data.length > 1 ? GL.LINEAR_MIPMAP_NEAREST : GL.LINEAR\n    };\n  }\n\n  const texture = new Texture2D(gl, {\n    ...image,\n    parameters: {\n      ...DEFAULT_TEXTURE_PARAMETERS,\n      ...specialTextureParameters,\n      ...parameters\n    }\n  });\n  // Track this texture\n  internalTextures[texture.id] = true;\n  return texture;\n}\n\nexport function destroyTexture(texture: Texture2D) {\n  if (!texture || !(texture instanceof Texture2D)) {\n    return;\n  }\n  if (internalTextures[texture.id]) {\n    texture.delete();\n    delete internalTextures[texture.id];\n  }\n}\n"],"mappings":"AAAA,SAAQA,SAAR,QAAwB,eAAxB;AAGA,MAAMC,0BAAkD,GAAG;EACzD,aADyD;EAEzD,aAFyD;EAGzD,cAHyD;EAIzD;AAJyD,CAA3D;AAQA,MAAMC,gBAAyC,GAAG,EAAlD;AAEA,OAAO,SAASC,aAATA,CACLC,EADK,EAELC,KAFK,EAGLC,UAHK,EAIa;EAKlB,IAAID,KAAK,YAAYL,SAArB,EAAgC;IAC9B,OAAOK,KAAP;EACD,CAFD,MAEO,IAAIA,KAAK,CAACE,WAAN,IAAqBF,KAAK,CAACE,WAAN,CAAkBC,IAAlB,KAA2B,QAApD,EAA8D;IAEnEH,KAAK,GAAG;MAACI,IAAI,EAAEJ;IAAP,CAAR;EACD;EAED,IAAIK,wBAAuD,GAAG,IAA9D;EACA,IAAIL,KAAK,CAACM,UAAV,EAAsB;IACpBD,wBAAwB,GAAG;MACzB,SAAyBL,KAAK,CAACI,IAAN,CAAWG,MAAX,GAAoB,CAApB;IADA,CAA3B;EAGD;EAED,MAAMC,OAAO,GAAG,IAAIb,SAAJ,CAAcI,EAAd,EAAkB;IAChC,GAAGC,KAD6B;IAEhCC,UAAU,EAAE;MACV,GAAGL,0BADO;MAEV,GAAGS,wBAFO;MAGV,GAAGJ;IAHO;EAFoB,CAAlB,CAAhB;EASAJ,gBAAgB,CAACW,OAAO,CAACC,EAAT,CAAhB,GAA+B,IAA/B;EACA,OAAOD,OAAP;AACD;AAED,OAAO,SAASE,cAATA,CAAwBF,OAAxB,EAA4C;EACjD,IAAI,CAACA,OAAD,IAAY,EAAEA,OAAO,YAAYb,SAArB,CAAhB,EAAiD;IAC/C;EACD;EACD,IAAIE,gBAAgB,CAACW,OAAO,CAACC,EAAT,CAApB,EAAkC;IAChCD,OAAO,CAACG,MAAR;IACA,OAAOd,gBAAgB,CAACW,OAAO,CAACC,EAAT,CAAvB;EACD;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}