{"ast":null,"code":"export function fp64ify(a) {\n  let out = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let startIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  const hiPart = Math.fround(a);\n  const loPart = a - hiPart;\n  out[startIndex] = hiPart;\n  out[startIndex + 1] = loPart;\n  return out;\n}\nexport function fp64LowPart(a) {\n  return a - Math.fround(a);\n}\nexport function fp64ifyMatrix4(matrix) {\n  const matrixFP64 = new Float32Array(32);\n  for (let i = 0; i < 4; ++i) {\n    for (let j = 0; j < 4; ++j) {\n      const index = i * 4 + j;\n      fp64ify(matrix[j * 4 + i], matrixFP64, index * 2);\n    }\n  }\n  return matrixFP64;\n}","map":{"version":3,"names":["fp64ify","a","out","arguments","length","undefined","startIndex","hiPart","Math","fround","loPart","fp64LowPart","fp64ifyMatrix4","matrix","matrixFP64","Float32Array","i","j","index"],"sources":["/Users/maks/Desktop/projects/geo-viz/node_modules/@luma.gl/shadertools/src/modules/fp64/fp64-utils.js"],"sourcesContent":["/** @typedef {import('./fp64-utils')} types */\n\n/**\n * Calculate WebGL 64 bit float\n * @type {types['fp64ify']}\n */\nexport function fp64ify(a, out = [], startIndex = 0) {\n  const hiPart = Math.fround(a);\n  const loPart = a - hiPart;\n  out[startIndex] = hiPart;\n  out[startIndex + 1] = loPart;\n  return out;\n}\n\n/** @type {types['fp64LowPart']} */\nexport function fp64LowPart(a) {\n  return a - Math.fround(a);\n}\n\n/**\n * Calculate WebGL 64 bit matrix (transposed \"Float64Array\")\n * @type {types['fp64ifyMatrix4']}\n * */\nexport function fp64ifyMatrix4(matrix) {\n  // Transpose the projection matrix to column major for GLSL.\n  const matrixFP64 = new Float32Array(32);\n  for (let i = 0; i < 4; ++i) {\n    for (let j = 0; j < 4; ++j) {\n      const index = i * 4 + j;\n      fp64ify(matrix[j * 4 + i], matrixFP64, index * 2);\n    }\n  }\n  return matrixFP64;\n}\n"],"mappings":"AAMA,OAAO,SAASA,OAATA,CAAiBC,CAAjB,EAA8C;EAAA,IAA1BC,GAA0B,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAApB,EAAoB;EAAA,IAAhBG,UAAgB,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAH,CAAG;EACnD,MAAMI,MAAM,GAAGC,IAAI,CAACC,MAAL,CAAYR,CAAZ,CAAf;EACA,MAAMS,MAAM,GAAGT,CAAC,GAAGM,MAAnB;EACAL,GAAG,CAACI,UAAD,CAAH,GAAkBC,MAAlB;EACAL,GAAG,CAACI,UAAU,GAAG,CAAd,CAAH,GAAsBI,MAAtB;EACA,OAAOR,GAAP;AACD;AAGD,OAAO,SAASS,WAATA,CAAqBV,CAArB,EAAwB;EAC7B,OAAOA,CAAC,GAAGO,IAAI,CAACC,MAAL,CAAYR,CAAZ,CAAX;AACD;AAMD,OAAO,SAASW,cAATA,CAAwBC,MAAxB,EAAgC;EAErC,MAAMC,UAAU,GAAG,IAAIC,YAAJ,CAAiB,EAAjB,CAAnB;EACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuB,EAAEA,CAAzB,EAA4B;IAC1B,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuB,EAAEA,CAAzB,EAA4B;MAC1B,MAAMC,KAAK,GAAGF,CAAC,GAAG,CAAJ,GAAQC,CAAtB;MACAjB,OAAO,CAACa,MAAM,CAACI,CAAC,GAAG,CAAJ,GAAQD,CAAT,CAAP,EAAoBF,UAApB,EAAgCI,KAAK,GAAG,CAAxC,CAAP;IACD;EACF;EACD,OAAOJ,UAAP;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}