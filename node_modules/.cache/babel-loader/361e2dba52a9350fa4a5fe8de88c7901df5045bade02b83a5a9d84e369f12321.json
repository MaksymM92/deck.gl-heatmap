{"ast":null,"code":"var _jsxFileName = \"/Users/maks/Desktop/projects/geo-viz/src/components/MapBox/MapBox.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport DeckGL from \"@deck.gl/react\";\nimport { Map } from 'react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { HeatmapLayer } from '@deck.gl/aggregation-layers';\nimport { Widget } from \"./components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DATA_URL = 'https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/screen-grid/uber-pickup-locations.json'; // eslint-disable-line\n\nconst ALT_DATA = 'https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson';\nconsole.log(ALT_DATA, 'alt data');\nconst API_KEY = 'pk.eyJ1IjoibWFrcy1tMTMiLCJhIjoiY2xlNXoxb2d0MGh4MjNwdnpqbGo0MnBodCJ9.tsyFzruRVKGCF-mK_kteRg';\nconst INITIAL_VIEW_STATE = {\n  longitude: -73.75,\n  latitude: 40.73,\n  zoom: 9,\n  maxZoom: 16,\n  pitch: 0,\n  bearing: 0\n};\nconst MAP_STYLE = 'https://basemaps.cartocdn.com/gl/dark-matter-nolabels-gl-style/style.json';\nexport const MapBox = _ref => {\n  _s();\n  let {\n    // data = ALT_DATA,\n    intensity = 2,\n    threshold = 0.03,\n    radiusPixels = 30,\n    mapStyle = MAP_STYLE,\n    showWidget = false\n  } = _ref;\n  const [mapData, setMapData] = useState([]);\n  useEffect(() => {\n    fetch('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/significant_month.geojson').then(data => data.json()).then(data => {\n      const coordinates = [];\n      for (let i = 0; i < data.features.length; i++) {\n        coordinates.push([data.features[i].geometry.coordinates[0], data.features[i].geometry.coordinates[1], Math.floor(Math.random() * (7 - 1 + 1) + 1)]);\n      }\n      // for(let item in data.features) {\n      //     coordinates.push(item.geometry.coordinates[0], item.geometry.coordinates[1], Math.floor(Math.random() * (7 - 1 + 1) + 1))\n      // }\n      console.log(coordinates.toString());\n    });\n  }, []);\n  const DEFAULT_LAYER_VALUES = {\n    data: mapData,\n    id: 'heatmp-layer',\n    pickable: false,\n    debounceTimeout: 5000,\n    getPosition: d => [d[0], d[1]],\n    getWeight: d => d[2],\n    radiusPixels,\n    intensity,\n    threshold\n  };\n  const initialLayer = new HeatmapLayer({\n    ...DEFAULT_LAYER_VALUES\n  });\n  const [layers, setLayers] = useState([initialLayer]);\n  const handleLayers = (value, type) => {\n    DEFAULT_LAYER_VALUES[type] = value;\n    const newLayer = new HeatmapLayer(DEFAULT_LAYER_VALUES);\n    setLayers([newLayer]);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [showWidget && /*#__PURE__*/_jsxDEV(Widget, {\n      handleUpdateLayers: handleLayers\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(DeckGL, {\n      initialViewState: INITIAL_VIEW_STATE,\n      controller: true,\n      layers: layers,\n      children: /*#__PURE__*/_jsxDEV(Map, {\n        reuseMaps: true,\n        mapboxAccessToken: API_KEY,\n        mapStyle: mapStyle,\n        preventStyleDiffing: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(MapBox, \"QA4wt5YxuiDPOxa4c3pNpwM+LPw=\");\n_c = MapBox;\nvar _c;\n$RefreshReg$(_c, \"MapBox\");","map":{"version":3,"names":["useEffect","useState","DeckGL","Map","HeatmapLayer","Widget","jsxDEV","_jsxDEV","Fragment","_Fragment","DATA_URL","ALT_DATA","console","log","API_KEY","INITIAL_VIEW_STATE","longitude","latitude","zoom","maxZoom","pitch","bearing","MAP_STYLE","MapBox","_ref","_s","intensity","threshold","radiusPixels","mapStyle","showWidget","mapData","setMapData","fetch","then","data","json","coordinates","i","features","length","push","geometry","Math","floor","random","toString","DEFAULT_LAYER_VALUES","id","pickable","debounceTimeout","getPosition","d","getWeight","initialLayer","layers","setLayers","handleLayers","value","type","newLayer","children","handleUpdateLayers","fileName","_jsxFileName","lineNumber","columnNumber","initialViewState","controller","reuseMaps","mapboxAccessToken","preventStyleDiffing","_c","$RefreshReg$"],"sources":["/Users/maks/Desktop/projects/geo-viz/src/components/MapBox/MapBox.jsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport DeckGL from \"@deck.gl/react\";\nimport { Map } from 'react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport {HeatmapLayer} from '@deck.gl/aggregation-layers';\nimport {Widget} from \"./components\";\n\nconst DATA_URL =\n    'https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/screen-grid/uber-pickup-locations.json';// eslint-disable-line\n\nconst ALT_DATA = 'https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson';\n\nconsole.log(ALT_DATA, 'alt data');\n\nconst API_KEY = 'pk.eyJ1IjoibWFrcy1tMTMiLCJhIjoiY2xlNXoxb2d0MGh4MjNwdnpqbGo0MnBodCJ9.tsyFzruRVKGCF-mK_kteRg';\n\nconst INITIAL_VIEW_STATE = {\n    longitude: -73.75,\n    latitude: 40.73,\n    zoom: 9,\n    maxZoom: 16,\n    pitch: 0,\n    bearing: 0\n};\n\nconst MAP_STYLE = 'https://basemaps.cartocdn.com/gl/dark-matter-nolabels-gl-style/style.json';\n\nexport const MapBox = ({\n                           // data = ALT_DATA,\n                           intensity = 2,\n                           threshold = 0.03,\n                           radiusPixels = 30,\n                           mapStyle = MAP_STYLE,\n                           showWidget = false,\n                       }) => {\n    const [mapData, setMapData] = useState([]);\n    useEffect(() => {\n         fetch('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/significant_month.geojson').then(data => data.json())\n            .then(data => {\n                const coordinates = [];\n                for(let i=0; i<data.features.length; i++) {\n                    coordinates.push([data.features[i].geometry.coordinates[0], data.features[i].geometry.coordinates[1], Math.floor(Math.random() * (7 - 1 + 1) + 1)])\n                }\n                // for(let item in data.features) {\n                //     coordinates.push(item.geometry.coordinates[0], item.geometry.coordinates[1], Math.floor(Math.random() * (7 - 1 + 1) + 1))\n                // }\n                console.log(coordinates.toString());\n            })\n    }, [])\n\n\n\n    const DEFAULT_LAYER_VALUES = {\n        data: mapData,\n        id: 'heatmp-layer',\n        pickable: false,\n        debounceTimeout: 5000,\n        getPosition: d => [d[0], d[1]],\n        getWeight: d => d[2],\n        radiusPixels,\n        intensity,\n        threshold,\n    }\n\n    const initialLayer = new HeatmapLayer({\n        ...DEFAULT_LAYER_VALUES,\n    })\n\n    const [layers, setLayers] = useState([initialLayer]);\n\n    const handleLayers = (value, type) => {\n        DEFAULT_LAYER_VALUES[type] = value;\n        const newLayer = new HeatmapLayer(DEFAULT_LAYER_VALUES);\n        setLayers([newLayer]);\n    }\n\n    return (\n        <>\n            {showWidget && <Widget handleUpdateLayers={handleLayers}/>}\n            <DeckGL initialViewState={INITIAL_VIEW_STATE} controller={true} layers={layers}>\n                <Map reuseMaps mapboxAccessToken={API_KEY} mapStyle={mapStyle} preventStyleDiffing={true} />\n            </DeckGL>\n        </>\n    )\n}"],"mappings":";;AAAA,SAAQA,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACzC,OAAOC,MAAM,MAAM,gBAAgB;AACnC,SAASC,GAAG,QAAQ,cAAc;AAClC,OAAO,8BAA8B;AACrC,SAAQC,YAAY,QAAO,6BAA6B;AACxD,SAAQC,MAAM,QAAO,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEpC,MAAMC,QAAQ,GACV,6GAA6G,CAAC;;AAElH,MAAMC,QAAQ,GAAG,6EAA6E;AAE9FC,OAAO,CAACC,GAAG,CAACF,QAAQ,EAAE,UAAU,CAAC;AAEjC,MAAMG,OAAO,GAAG,4FAA4F;AAE5G,MAAMC,kBAAkB,GAAG;EACvBC,SAAS,EAAE,CAAC,KAAK;EACjBC,QAAQ,EAAE,KAAK;EACfC,IAAI,EAAE,CAAC;EACPC,OAAO,EAAE,EAAE;EACXC,KAAK,EAAE,CAAC;EACRC,OAAO,EAAE;AACb,CAAC;AAED,MAAMC,SAAS,GAAG,2EAA2E;AAE7F,OAAO,MAAMC,MAAM,GAAGC,IAAA,IAOO;EAAAC,EAAA;EAAA,IAPN;IACI;IACAC,SAAS,GAAG,CAAC;IACbC,SAAS,GAAG,IAAI;IAChBC,YAAY,GAAG,EAAE;IACjBC,QAAQ,GAAGP,SAAS;IACpBQ,UAAU,GAAG;EACjB,CAAC,GAAAN,IAAA;EACpB,MAAM,CAACO,OAAO,EAAEC,UAAU,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EAC1CD,SAAS,CAAC,MAAM;IACXiC,KAAK,CAAC,qFAAqF,CAAC,CAACC,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,EAAE,CAAC,CAClHF,IAAI,CAACC,IAAI,IAAI;MACV,MAAME,WAAW,GAAG,EAAE;MACtB,KAAI,IAAIC,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACH,IAAI,CAACI,QAAQ,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;QACtCD,WAAW,CAACI,IAAI,CAAC,CAACN,IAAI,CAACI,QAAQ,CAACD,CAAC,CAAC,CAACI,QAAQ,CAACL,WAAW,CAAC,CAAC,CAAC,EAAEF,IAAI,CAACI,QAAQ,CAACD,CAAC,CAAC,CAACI,QAAQ,CAACL,WAAW,CAAC,CAAC,CAAC,EAAEM,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACvJ;MACA;MACA;MACA;MACAjC,OAAO,CAACC,GAAG,CAACwB,WAAW,CAACS,QAAQ,EAAE,CAAC;IACvC,CAAC,CAAC;EACV,CAAC,EAAE,EAAE,CAAC;EAIN,MAAMC,oBAAoB,GAAG;IACzBZ,IAAI,EAAEJ,OAAO;IACbiB,EAAE,EAAE,cAAc;IAClBC,QAAQ,EAAE,KAAK;IACfC,eAAe,EAAE,IAAI;IACrBC,WAAW,EAAEC,CAAC,IAAI,CAACA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9BC,SAAS,EAAED,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC;IACpBxB,YAAY;IACZF,SAAS;IACTC;EACJ,CAAC;EAED,MAAM2B,YAAY,GAAG,IAAIlD,YAAY,CAAC;IAClC,GAAG2C;EACP,CAAC,CAAC;EAEF,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGvD,QAAQ,CAAC,CAACqD,YAAY,CAAC,CAAC;EAEpD,MAAMG,YAAY,GAAGA,CAACC,KAAK,EAAEC,IAAI,KAAK;IAClCZ,oBAAoB,CAACY,IAAI,CAAC,GAAGD,KAAK;IAClC,MAAME,QAAQ,GAAG,IAAIxD,YAAY,CAAC2C,oBAAoB,CAAC;IACvDS,SAAS,CAAC,CAACI,QAAQ,CAAC,CAAC;EACzB,CAAC;EAED,oBACIrD,OAAA,CAAAE,SAAA;IAAAoD,QAAA,GACK/B,UAAU,iBAAIvB,OAAA,CAACF,MAAM;MAACyD,kBAAkB,EAAEL;IAAa;MAAAM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAE,eAC1D3D,OAAA,CAACL,MAAM;MAACiE,gBAAgB,EAAEpD,kBAAmB;MAACqD,UAAU,EAAE,IAAK;MAACb,MAAM,EAAEA,MAAO;MAAAM,QAAA,eAC3EtD,OAAA,CAACJ,GAAG;QAACkE,SAAS;QAACC,iBAAiB,EAAExD,OAAQ;QAACe,QAAQ,EAAEA,QAAS;QAAC0C,mBAAmB,EAAE;MAAK;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAG;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACvF;EAAA,gBACV;AAEX,CAAC;AAAAzC,EAAA,CAzDYF,MAAM;AAAAiD,EAAA,GAANjD,MAAM;AAAA,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}