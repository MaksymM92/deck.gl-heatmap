{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { clamp } from '@math.gl/core';\nimport Controller from './controller';\nimport { OrbitState } from './orbit-controller';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nclass OrthographicState extends OrbitState {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"zoomAxis\", void 0);\n    this.zoomAxis = props.zoomAxis || 'all';\n  }\n  _calculateNewZoom(_ref) {\n    let {\n      scale,\n      startZoom\n    } = _ref;\n    const {\n      maxZoom,\n      minZoom\n    } = this.getViewportProps();\n    if (startZoom === undefined) {\n      startZoom = this.getViewportProps().zoom;\n    }\n    let deltaZoom = Math.log2(scale);\n    if (Array.isArray(startZoom)) {\n      let [newZoomX, newZoomY] = startZoom;\n      switch (this.zoomAxis) {\n        case 'X':\n          newZoomX = clamp(newZoomX + deltaZoom, minZoom, maxZoom);\n          break;\n        case 'Y':\n          newZoomY = clamp(newZoomY + deltaZoom, minZoom, maxZoom);\n          break;\n        default:\n          let z = Math.min(newZoomX + deltaZoom, newZoomY + deltaZoom);\n          if (z < minZoom) {\n            deltaZoom += minZoom - z;\n          }\n          z = Math.max(newZoomX + deltaZoom, newZoomY + deltaZoom);\n          if (z > maxZoom) {\n            deltaZoom += maxZoom - z;\n          }\n          newZoomX += deltaZoom;\n          newZoomY += deltaZoom;\n      }\n      return [newZoomX, newZoomY];\n    }\n    return clamp(startZoom + deltaZoom, minZoom, maxZoom);\n  }\n}\nexport default class OrthographicController extends Controller {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"ControllerState\", OrthographicState);\n    _defineProperty(this, \"transition\", {\n      transitionDuration: 300,\n      transitionInterpolator: new LinearInterpolator(['target', 'zoom'])\n    });\n    _defineProperty(this, \"dragMode\", 'pan');\n  }\n  _onPanRotate() {\n    return false;\n  }\n}","map":{"version":3,"names":["clamp","Controller","OrbitState","LinearInterpolator","OrthographicState","constructor","props","_defineProperty","zoomAxis","_calculateNewZoom","_ref","scale","startZoom","maxZoom","minZoom","getViewportProps","undefined","zoom","deltaZoom","Math","log2","Array","isArray","newZoomX","newZoomY","z","min","max","OrthographicController","arguments","transitionDuration","transitionInterpolator","_onPanRotate"],"sources":["/Users/maks/Desktop/projects/geo-viz/node_modules/@deck.gl/core/src/controllers/orthographic-controller.ts"],"sourcesContent":["import {clamp} from '@math.gl/core';\nimport Controller from './controller';\nimport {OrbitState} from './orbit-controller';\nimport LinearInterpolator from '../transitions/linear-interpolator';\n\nclass OrthographicState extends OrbitState {\n  zoomAxis: 'X' | 'Y' | 'all';\n\n  constructor(props) {\n    super(props);\n\n    this.zoomAxis = props.zoomAxis || 'all';\n  }\n\n  _calculateNewZoom({scale, startZoom}) {\n    const {maxZoom, minZoom} = this.getViewportProps();\n    if (startZoom === undefined) {\n      startZoom = this.getViewportProps().zoom;\n    }\n    let deltaZoom = Math.log2(scale);\n    if (Array.isArray(startZoom)) {\n      let [newZoomX, newZoomY] = startZoom;\n      switch (this.zoomAxis) {\n        case 'X':\n          // Scale x only\n          newZoomX = clamp(newZoomX + deltaZoom, minZoom, maxZoom);\n          break;\n        case 'Y':\n          // Scale y only\n          newZoomY = clamp(newZoomY + deltaZoom, minZoom, maxZoom);\n          break;\n        default:\n          // Lock aspect ratio\n          let z = Math.min(newZoomX + deltaZoom, newZoomY + deltaZoom);\n          if (z < minZoom) {\n            deltaZoom += minZoom - z;\n          }\n          z = Math.max(newZoomX + deltaZoom, newZoomY + deltaZoom);\n          if (z > maxZoom) {\n            deltaZoom += maxZoom - z;\n          }\n          newZoomX += deltaZoom;\n          newZoomY += deltaZoom;\n      }\n      return [newZoomX, newZoomY];\n    }\n    // Ignore `zoomAxis`\n    // `LinearTransitionInterpolator` does not support interpolation between a number and an array\n    // So if zoom is a number (legacy use case), new zoom still has to be a number\n    return clamp(startZoom + deltaZoom, minZoom, maxZoom);\n  }\n}\n\nexport default class OrthographicController extends Controller<OrbitState> {\n  ControllerState = OrthographicState;\n  transition = {\n    transitionDuration: 300,\n    transitionInterpolator: new LinearInterpolator(['target', 'zoom'])\n  };\n  dragMode: 'pan' | 'rotate' = 'pan';\n\n  _onPanRotate() {\n    // No rotation in orthographic view\n    return false;\n  }\n}\n"],"mappings":";AAAA,SAAQA,KAAR,QAAoB,eAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAAQC,UAAR,QAAyB,oBAAzB;AACA,OAAOC,kBAAP,MAA+B,oCAA/B;AAEA,MAAMC,iBAAN,SAAgCF,UAAhC,CAA2C;EAGzCG,WAAWA,CAACC,KAAD,EAAQ;IACjB,MAAMA,KAAN;IADiBC,eAAA;IAGjB,KAAKC,QAAL,GAAgBF,KAAK,CAACE,QAAN,IAAkB,KAAlC;EACD;EAEDC,iBAAiBA,CAAAC,IAAA,EAAqB;IAAA,IAApB;MAACC,KAAD;MAAQC;IAAR,CAAD,GAAAF,IAAA;IACf,MAAM;MAACG,OAAD;MAAUC;IAAV,IAAqB,KAAKC,gBAAL,EAA3B;IACA,IAAIH,SAAS,KAAKI,SAAlB,EAA6B;MAC3BJ,SAAS,GAAG,KAAKG,gBAAL,GAAwBE,IAApC;IACD;IACD,IAAIC,SAAS,GAAGC,IAAI,CAACC,IAAL,CAAUT,KAAV,CAAhB;IACA,IAAIU,KAAK,CAACC,OAAN,CAAcV,SAAd,CAAJ,EAA8B;MAC5B,IAAI,CAACW,QAAD,EAAWC,QAAX,IAAuBZ,SAA3B;MACA,QAAQ,KAAKJ,QAAb;QACE,KAAK,GAAL;UAEEe,QAAQ,GAAGvB,KAAK,CAACuB,QAAQ,GAAGL,SAAZ,EAAuBJ,OAAvB,EAAgCD,OAAhC,CAAhB;UACA;QACF,KAAK,GAAL;UAEEW,QAAQ,GAAGxB,KAAK,CAACwB,QAAQ,GAAGN,SAAZ,EAAuBJ,OAAvB,EAAgCD,OAAhC,CAAhB;UACA;QACF;UAEE,IAAIY,CAAC,GAAGN,IAAI,CAACO,GAAL,CAASH,QAAQ,GAAGL,SAApB,EAA+BM,QAAQ,GAAGN,SAA1C,CAAR;UACA,IAAIO,CAAC,GAAGX,OAAR,EAAiB;YACfI,SAAS,IAAIJ,OAAO,GAAGW,CAAvB;UACD;UACDA,CAAC,GAAGN,IAAI,CAACQ,GAAL,CAASJ,QAAQ,GAAGL,SAApB,EAA+BM,QAAQ,GAAGN,SAA1C,CAAJ;UACA,IAAIO,CAAC,GAAGZ,OAAR,EAAiB;YACfK,SAAS,IAAIL,OAAO,GAAGY,CAAvB;UACD;UACDF,QAAQ,IAAIL,SAAZ;UACAM,QAAQ,IAAIN,SAAZ;MAAA;MAEJ,OAAO,CAACK,QAAD,EAAWC,QAAX,CAAP;IACD;IAID,OAAOxB,KAAK,CAACY,SAAS,GAAGM,SAAb,EAAwBJ,OAAxB,EAAiCD,OAAjC,CAAZ;EACD;AA7CwC;AAgD3C,eAAe,MAAMe,sBAAN,SAAqC3B,UAArC,CAA4D;EAAAI,YAAA;IAAA,SAAAwB,SAAA;IAAAtB,eAAA,0BACvDH,iBADuD;IAAAG,eAAA,qBAE5D;MACXuB,kBAAkB,EAAE,GADT;MAEXC,sBAAsB,EAAE,IAAI5B,kBAAJ,CAAuB,CAAC,QAAD,EAAW,MAAX,CAAvB;IAFb,CAF4D;IAAAI,eAAA,mBAM5C,KAN4C;EAAA;EAQzEyB,YAAYA,CAAA,EAAG;IAEb,OAAO,KAAP;EACD;AAXwE"},"metadata":{},"sourceType":"module","externalDependencies":[]}